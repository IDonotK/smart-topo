/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { ActionTree, MutationTree, Commit, Dispatch } from 'vuex';
import { CompsTree } from '@/types/dashboard';
import { AxiosResponse } from 'axios';
import graph from '@/graph';
import dashboardLayout from './dashboard-data-layout';
import dashboardQuery from './dashboard-data-query';

export interface State {
  current: number;
  group: number;
  tree: CompsTree[];
}

const initState: State = {
  ...dashboardLayout.state,
};

// mutations
const mutations: MutationTree<any> = {
  ...dashboardLayout.mutations,
};

// actions
const actions: ActionTree<State, any> = {
  ...dashboardQuery.actions,
  MIXHANDLE_CHANGE_GROUP(
    context: { commit: Commit; dispatch: Dispatch; state: State; rootState: any },
    index: number,
  ): void {
    const rocketOption = context.rootState.rocketOption;
    const temp: any = {};
    if (rocketOption.currentService) {
      temp.service = rocketOption.currentService;
    }
    if (rocketOption.currentEndpoint) {
      temp.endpoint = rocketOption.currentEndpoint;
    }
    if (rocketOption.currentInstance) {
      temp.instance = rocketOption.currentInstance;
    }
    if (rocketOption.currentDatabase) {
      temp.database = rocketOption.currentDatabase;
    }
    context.commit('SET_GROUP_QUERY', temp);
    context.commit('SET_CURRENT_GROUP', index);
    context.dispatch('SET_CURRENT_STATE', context.state.tree[index].query);
    context.dispatch('RUN_EVENTS', {}, { root: true });
  },
  MIXHANDLE_CHANGE_GROUP_WITH_CURRENT(
    context: { commit: Commit; dispatch: Dispatch; state: State; rootState: any },
    { index, current = 0 }: { index: number; current: number },
  ): void {
    const { rocketOption } = context.rootState;
    const temp: any = {};
    if (rocketOption.currentService) {
      temp.service = rocketOption.currentService;
    }
    if (rocketOption.currentEndpoint) {
      temp.endpoint = rocketOption.currentEndpoint;
    }
    if (rocketOption.currentInstance) {
      temp.instance = rocketOption.currentInstance;
    }
    if (rocketOption.currentDatabase) {
      temp.database = rocketOption.currentDatabase;
    }
    context.commit('SET_GROUP_QUERY', temp);
    context.commit('SET_CURRENT_GROUP_WITH_CURRENT', { index, current });
    context.dispatch('SET_CURRENT_STATE', context.state.tree[index].query);
    context.dispatch('RUN_EVENTS', {}, { root: true });
  },
  TYPE_METRICS(context, params: { name: string }) {
    const metricNames = (params.name || '').split(',').map((item: string) => item.replace(/^\s*|\s*$/g, ''));
    return Promise.all(
      metricNames.map((item: string) => {
        return graph
          .query('queryTypeOfMetrics')
          .params({ name: item })
          .then((res: AxiosResponse) => {
            return res.data.data;
          });
      }),
    );
  },
  GET_ALL_TEMPLATES(context) {
    // return graph
    //   .query('queryGetAllTemplates')
    //   .params({})
    //   .then((res: AxiosResponse) => {
    //     if (!res.data.data) {
    //       return;
    //     }
    //     return res.data.data.getAllTemplates || [];
    //   });

    // luke
    return Promise.resolve().then(() => {
        var res = {
            "data": {
                "getAllTemplates": [{
                    "name": "APM",
                    "type": "DASHBOARD",
                    "configuration": "[\n  {\n    \"name\": \"APM\",\n    \"type\": \"service\",\n    \"children\": [\n      {\n        \"name\": \"Global\",\n        \"children\": [\n          {\n            \"width\": 3,\n            \"title\": \"Services Load\",\n            \"height\": \"300\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_cpm\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Slow Services\",\n            \"height\": \"300\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_resp_time\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Un-Health Services (Apdex)\",\n            \"height\": \"300\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_apdex\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"10000\",\n            \"sortOrder\": \"ASC\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Slow Endpoints\",\n            \"height\": \"300\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_avg\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"6\",\n            \"title\": \"Global Response Latency\",\n            \"height\": \"280\",\n            \"entityType\": \"All\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"all_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0, 1, 2, 3, 4\",\n            \"unit\": \"percentile in ms\"\n          },\n          {\n            \"width\": \"6\",\n            \"title\": \"Global Heatmap\",\n            \"height\": \"280\",\n            \"entityType\": \"All\",\n            \"independentSelector\": false,\n            \"metricType\": \"HEATMAP\",\n            \"unit\": \"ms\",\n            \"queryMetricType\": \"readHeatMap\",\n            \"chartType\": \"ChartHeatmap\",\n            \"metricName\": \"all_heatmap\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Service\",\n        \"children\": [\n          {\n            \"width\": 3,\n            \"title\": \"Service Apdex\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_apdex\",\n            \"queryMetricType\": \"readMetricsValue\",\n            \"chartType\": \"ChartNum\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"10000\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Service Avg Response Time\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_resp_time\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Successful Rate\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_sla\",\n            \"queryMetricType\": \"readMetricsValue\",\n            \"chartType\": \"ChartNum\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Service Load\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_cpm\",\n            \"queryMetricType\": \"readMetricsValue\",\n            \"chartType\": \"ChartNum\",\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Service Apdex\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_apdex\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"10000\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Service Response Time Percentile\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"service_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0, 1, 2, 3, 4\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Successful Rate\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_sla\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Service Load\",\n            \"height\": \"200\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_cpm\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Service Instances Load\",\n            \"height\": \"280\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_cpm\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": true,\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Slow Service Instance\",\n            \"height\": \"280\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_resp_time\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": true,\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Service Instance Successful Rate\",\n            \"height\": \"280\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_sla\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": true,\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\",\n            \"sortOrder\": \"ASC\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Instance\",\n        \"children\": [\n          {\n            \"width\": \"4\",\n            \"title\": \"Service Instance Load\",\n            \"height\": \"150\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_cpm\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Service Instance Successful Rate\",\n            \"height\": \"150\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_sla\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Service Instance Latency\",\n            \"height\": \"150\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"service_instance_resp_time\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"JVM CPU (Java Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_jvm_cpu\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\",\n            \"aggregation\": \"+\",\n            \"aggregationNum\": \"\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"JVM Memory (Java Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_jvm_memory_heap, instance_jvm_memory_heap_max,instance_jvm_memory_noheap, instance_jvm_memory_noheap_max\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"MB\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"1048576\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"JVM GC Time\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_jvm_young_gc_time, instance_jvm_old_gc_time\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"JVM GC Count\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"metricName\": \"instance_jvm_young_gc_count, instance_jvm_old_gc_count\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"JVM Thread Count (Java Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"instance_jvm_thread_live_count, instance_jvm_thread_daemon_count, instance_jvm_thread_peak_count\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"CLR CPU  (.NET Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_clr_cpu\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"CLR GC (.NET Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_clr_gen0_collect_count, instance_clr_gen1_collect_count, instance_clr_gen2_collect_count\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"CLR Heap Memory (.NET Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"instance_clr_heap_memory\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"MB\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"1048576\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"CLR Thread (.NET Service)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"instance_clr_available_completion_port_threads,instance_clr_available_worker_threads,instance_clr_max_completion_port_threads,instance_clr_max_worker_threads\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Endpoint\",\n        \"children\": [\n          {\n            \"width\": \"4\",\n            \"title\": \"Endpoint Load in Current Service\",\n            \"height\": \"280\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_cpm\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": true,\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Slow Endpoints in Current Service\",\n            \"height\": \"280\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"endpoint_avg\",\n            \"unit\": \"ms\",\n            \"parentService\": true\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Successful Rate in Current Service\",\n            \"height\": \"280\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_sla\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\",\n            \"parentService\": true,\n            \"unit\": \"%\",\n            \"sortOrder\": \"ASC\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Endpoint Load\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_cpm\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Endpoint Avg Response Time\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_avg\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Endpoint Response Time Percentile\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"endpoint_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0, 1, 2, 3, 4\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Endpoint Successful Rate\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"endpoint_sla\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          }\n        ]\n      }\n    ]\n  }\n]",
                    "activated": true,
                    "disabled": false
                }, {
                    "name": "Database",
                    "type": "DASHBOARD",
                    "configuration": "[\n  {\n    \"name\": \"Database\",\n    \"type\": \"database\",\n    \"children\": [\n      {\n        \"name\": \"Database\",\n        \"children\": [\n          {\n            \"width\": 3,\n            \"title\": \"Database Avg Response Time\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"database_access_resp_time\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Database Access Successful Rate\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"database_access_sla\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Database Traffic\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"database_access_cpm\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Database Access Latency Percentile\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"database_access_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0, 1, 2, 3, 4\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"6\",\n            \"title\": \"Slow Statements\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"SAMPLED_RECORD\",\n            \"metricName\": \"top_n_database_statement\",\n            \"queryMetricType\": \"readSampledRecords\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": true,\n            \"sortOrder\": \"DES\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"All Database Loads\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"database_access_cpm\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"sortOrder\": \"DES\",\n            \"unit\": \"CPM - calls per minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Un-Health Databases (Successful Rate)\",\n            \"height\": 350,\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"database_access_sla\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"parentService\": false,\n            \"sortOrder\": \"ASC\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          }\n        ]\n      }\n    ]\n  }\n]",
                    "activated": true,
                    "disabled": false
                }, {
                    "name": "SelfObservability",
                    "type": "DASHBOARD",
                    "configuration": "[\n  {\n    \"name\": \"SelfObservability\",\n    \"type\": \"service\",\n    \"children\": [\n      {\n        \"name\": \"oap-server\",\n        \"children\": [\n          {\n            \"width\": \"3\",\n            \"title\": \"CPU\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_cpu_percentage\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"%\"\n          },\n          {\n            \"width\": \"3\",\n            \"title\": \"Memory\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_jvm_memory_bytes_used\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"MB\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"1000000\"\n          },\n          {\n            \"width\": \"3\",\n            \"title\": \"GC Count\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_jvm_young_gc_count,meter_instance_jvm_old_gc_count\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"unit\": \"Per Minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"GC Time\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_jvm_young_gc_time,meter_instance_jvm_old_gc_time\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"unit\": \"Millisecond\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Trace Analysis Count\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_trace_count,meter_instance_trace_analysis_error_count\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"unit\": \"Per Minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Trace Analysis Latency\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"meter_instance_trace_latency_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"labelsIndex\": \"50,70,90,99\",\n            \"metricLabels\": \"50,70,90,99\",\n            \"unit\": \"Millisecond\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Mesh Analysis Count\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_mesh_count,meter_instance_mesh_analysis_error_count\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"unit\": \"Per Minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Mesh Analysis Latency\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"meter_instance_mesh_latency_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricLabels\": \"50,70,90,99\",\n            \"labelsIndex\": \"50,70,90,99\",\n            \"unit\": \"Millisecond\"\n          },\n          {\n            \"width\": \"3\",\n            \"title\": \"Aggregation\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_metrics_first_aggregation,meter_instance_metrics_second_aggregation\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"unit\": \"Per Minute\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Persistence Count\",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"metricName\": \"meter_instance_persistence_prepare_count,meter_instance_persistence_execute_count,meter_instance_persistence_error_count\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"unit\": \"Per 5 Minutes\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Persistence Preparing Latency \",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"unit\": \"Millisecond\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"meter_instance_persistence_prepare_percentile\",\n            \"metricLabels\": \"50,70,90,99\",\n            \"labelsIndex\": \"50,70,90,99\"\n          },\n          {\n            \"width\": 3,\n            \"title\": \"Persistence Execution Latency \",\n            \"height\": \"200\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"metricName\": \"meter_instance_persistence_execute_percentile\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricLabels\": \"50,70,90,99\",\n            \"labelsIndex\": \"50,70,90,99\",\n            \"unit\": \"Millisecond\"\n          }\n        ]\n      }\n    ]\n  }\n]",
                    "activated": true,
                    "disabled": false
                }, {
                    "name": "Spring-Sleuth",
                    "type": "DASHBOARD",
                    "configuration": "[\n  {\n    \"name\":\"Spring Sleuth\",\n    \"type\":\"service\",\n    \"children\":[\n      {\n        \"name\":\"Sleuth\",\n        \"children\": [{\n          \"width\": \"3\",\n          \"title\": \"HTTP Request\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_http_server_requests_count\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"Count\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"HTTP Request Duration\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_http_server_requests_duration\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"ms\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"JDBC Connections\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"metricName\": \"meter_jdbc_connections_max,meter_jdbc_connections_active,meter_jdbc_connections_idle\",\n          \"unit\": \"Count\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"Tomcat Session\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"metricName\": \"meter_tomcat_sessions_active_max,meter_tomcat_sessions_active_current,meter_tomcat_sessions_rejected\",\n          \"unit\": \"Count\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"Instance CPU Usage\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_process_cpu_usage\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"aggregation\": \"+\",\n          \"aggregationNum\": \"\",\n          \"unit\": \"%\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"OS CPU Usage\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_system_cpu_usage\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"aggregation\": \"+\",\n          \"aggregationNum\": \"\",\n          \"unit\": \"%\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"OS System Load\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_system_load_average_1m\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"\",\n          \"aggregation\": \"+\",\n          \"aggregationNum\": \"\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"OS Process File\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_process_files_max,meter_process_files_open\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"Count\",\n          \"aggregation\": \"+\",\n          \"aggregationNum\": \"\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"JVM GC Pause Duration\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_jvm_gc_pause_duration\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"ms\",\n          \"aggregation\": \"+\",\n          \"aggregationNum\": \"\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"JVM Memory\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_jvm_memory_max,meter_jvm_memory_used,meter_jvm_memory_committed\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"aggregation\": \"/\",\n          \"aggregationNum\": \"1048576\",\n          \"unit\": \"MB\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"JVM Thread\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_jvm_threads_peak,meter_jvm_threads_live,meter_jvm_threads_daemon\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"Count\"\n        }, {\n          \"width\": \"3\",\n          \"title\": \"JVM classes\",\n          \"height\": \"200\",\n          \"entityType\": \"ServiceInstance\",\n          \"independentSelector\": false,\n          \"metricType\": \"REGULAR_VALUE\",\n          \"metricName\": \"meter_jvm_classes_loaded,meter_jvm_classes_unloaded\",\n          \"queryMetricType\": \"readMetricsValues\",\n          \"chartType\": \"ChartLine\",\n          \"unit\": \"Count\"\n        }]\n      }\n    ]\n}\n]",
                    "activated": false,
                    "disabled": false
                }, {
                    "name": "Topology Endpoint",
                    "type": "TOPOLOGY_ENDPOINT",
                    "configuration": "[\n  {\n    \"width\": \"4\",\n    \"title\": \"Endpoint Load in Current Service\",\n    \"height\": \"280\",\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"endpoint_cpm\",\n    \"queryMetricType\": \"sortMetrics\",\n    \"chartType\": \"ChartSlow\",\n    \"parentService\": true,\n    \"unit\": \"CPM - calls per minute\"\n  },\n  {\n    \"width\": \"4\",\n    \"title\": \"Slow Endpoints in Current Service\",\n    \"height\": \"280\",\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"queryMetricType\": \"sortMetrics\",\n    \"chartType\": \"ChartSlow\",\n    \"metricName\": \"endpoint_avg\",\n    \"unit\": \"ms\",\n    \"parentService\": true\n  },\n  {\n    \"width\": \"4\",\n    \"title\": \"Successful Rate in Current Service\",\n    \"height\": \"280\",\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"endpoint_sla\",\n    \"queryMetricType\": \"sortMetrics\",\n    \"chartType\": \"ChartSlow\",\n    \"aggregation\": \"/\",\n    \"aggregationNum\": \"100\",\n    \"parentService\": true,\n    \"unit\": \"%\",\n    \"sortOrder\": \"ASC\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"Endpoint Load\",\n    \"height\": 350,\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"endpoint_cpm\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"Endpoint Avg Response Time\",\n    \"height\": 350,\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"endpoint_avg\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"ms\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"Endpoint Response Time Percentile\",\n    \"height\": 350,\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"LABELED_VALUE\",\n    \"metricName\": \"endpoint_percentile\",\n    \"queryMetricType\": \"readLabeledMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"metricLabels\": \"P50, P75, P90, P95, P99\",\n    \"labelsIndex\": \"0, 1, 2, 3, 4\",\n    \"unit\": \"ms\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"Endpoint Successful Rate\",\n    \"height\": 350,\n    \"entityType\": \"Endpoint\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"endpoint_sla\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"%\",\n    \"aggregation\": \"/\",\n    \"aggregationNum\": \"100\"\n  }\n]",
                    "activated": true,
                    "disabled": false
                }, {
                    "name": "Topology Instance",
                    "type": "TOPOLOGY_INSTANCE",
                    "configuration": "[\n  {\n    \"width\": \"4\",\n    \"title\": \"Service Instance Load\",\n    \"height\": \"150\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"service_instance_cpm\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"CPM - calls per minute\"\n  },\n  {\n    \"width\": \"4\",\n    \"title\": \"Service Instance Successful Rate\",\n    \"height\": \"150\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"service_instance_resp_time\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"%\",\n    \"aggregation\": \"/\",\n    \"aggregationNum\": \"100\"\n  },\n  {\n    \"width\": \"4\",\n    \"title\": \"Service Instance Latency\",\n    \"height\": \"150\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"service_instance_resp_time\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"ms\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"JVM CPU (Java Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_jvm_cpu\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"%\",\n    \"aggregation\": \"+\",\n    \"aggregationNum\": \"\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"JVM Memory (Java Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_jvm_memory_heap, instance_jvm_memory_heap_max,instance_jvm_memory_noheap, instance_jvm_memory_noheap_max\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"MB\",\n    \"aggregation\": \"/\",\n    \"aggregationNum\": \"1048576\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"JVM GC Time\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_jvm_young_gc_time, instance_jvm_old_gc_time\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"ms\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"JVM GC Count\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartBar\",\n    \"metricName\": \"instance_jvm_young_gc_count, instance_jvm_old_gc_count\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"CLR CPU  (.NET Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_clr_cpu\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"%\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"CLR GC (.NET Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_clr_gen0_collect_count, instance_clr_gen1_collect_count, instance_clr_gen2_collect_count\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartBar\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"CLR Heap Memory (.NET Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"metricName\": \"instance_clr_heap_memory\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"unit\": \"MB\"\n  },\n  {\n    \"width\": 3,\n    \"title\": \"CLR Thread (.NET Service)\",\n    \"height\": \"250\",\n    \"entityType\": \"ServiceInstance\",\n    \"independentSelector\": false,\n    \"metricType\": \"REGULAR_VALUE\",\n    \"queryMetricType\": \"readMetricsValues\",\n    \"chartType\": \"ChartLine\",\n    \"metricName\": \"instance_clr_available_completion_port_threads,instance_clr_available_worker_threads,instance_clr_max_completion_port_threads,instance_clr_max_worker_threads\"\n  }\n]",
                    "activated": true,
                    "disabled": false
                }, {
                    "name": "Web Browser",
                    "type": "DASHBOARD",
                    "configuration": "[\n  {\n    \"name\": \"Web Browser\",\n    \"type\": \"browser\",\n    \"children\": [\n      {\n        \"name\": \"Web App\",\n        \"children\": [\n          {\n            \"width\": \"4\",\n            \"title\": \"All Browsers App Load (CPM - calls per minute)\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_pv\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"All Browsers App Error Rate\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_error_rate\",\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"All Browsers App Error Count\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_error_sum\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"App Load (CPM - calls per minute)\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_pv\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"App Error Rate\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_error_rate\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\",\n            \"unit\": \"%\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"App Error Count\",\n            \"height\": \"250\",\n            \"entityType\": \"Service\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"metricName\": \"browser_app_error_sum\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Load of Versions In The Selected App (CPM - calls per minute)\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_single_version_pv\",\n            \"parentService\": true\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Error Rate of Versions In The Selected App\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_single_version_error_rate\",\n            \"parentService\": true,\n            \"unit\": \"%\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Error Count of Versions In The Selected App\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_single_version_error_sum\",\n            \"parentService\": true\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Load of The Selected Version (CPM - calls per minute) \",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_single_version_pv\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Error Rate  of The Selected Version\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_single_version_error_rate\",\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Error Count  of The Selected Version\",\n            \"height\": \"250\",\n            \"entityType\": \"ServiceInstance\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"metricName\": \"browser_app_single_version_error_sum\"\n          }\n        ]\n      },\n      {\n        \"name\": \"Pages\",\n        \"children\": [\n          {\n            \"width\": \"4\",\n            \"title\": \"Top Hot Pages  (CPM - calls per minute)\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_page_pv\",\n            \"parentService\": true\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Top Unstable Pages / Error Rate\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_page_error_rate\",\n            \"unit\": \"%\",\n            \"parentService\": true,\n            \"aggregation\": \"/\",\n            \"aggregationNum\": \"100\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Top Unstable Pages / Error Count\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"sortMetrics\",\n            \"chartType\": \"ChartSlow\",\n            \"metricName\": \"browser_app_page_error_sum\",\n            \"parentService\": true\n          },\n          {\n            \"width\": \"6\",\n            \"title\": \"Page Error Count Layout\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartBar\",\n            \"metricName\": \"browser_app_page_ajax_error_sum,browser_app_page_resource_error_sum,browser_app_page_js_error_sum,browser_app_page_unknown_error_sum\"\n          },\n          {\n            \"width\": \"6\",\n            \"title\": \"Page Performance\",\n            \"height\": 350,\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"REGULAR_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_redirect_avg,browser_app_page_dns_avg,browser_app_page_ttfb_avg,browser_app_page_tcp_avg,browser_app_page_trans_avg,browser_app_page_dom_analysis_avg,browser_app_page_fpt_avg,browser_app_page_dom_ready_avg,browser_app_page_load_page_avg,browser_app_page_res_avg,browser_app_page_ssl_avg,browser_app_page_ttl_avg,browser_app_page_first_pack_avg,browser_app_page_fmp_avg\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page FPT Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_fpt_percentile\",\n            \"unit\": \"ms\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page TTL Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_ttl_percentile\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page DOM Ready Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_dom_ready_percentile\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page Load Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_load_page_percentile\",\n            \"unit\": \"ms\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page First Pack Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_first_pack_percentile\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\",\n            \"unit\": \"ms\"\n          },\n          {\n            \"width\": \"4\",\n            \"title\": \"Page FMP Latency\",\n            \"height\": \"250\",\n            \"entityType\": \"Endpoint\",\n            \"independentSelector\": false,\n            \"metricType\": \"LABELED_VALUE\",\n            \"sortOrder\": \"DES\",\n            \"queryMetricType\": \"readLabeledMetricsValues\",\n            \"chartType\": \"ChartLine\",\n            \"metricName\": \"browser_app_page_fmp_percentile\",\n            \"metricLabels\": \"P50, P75, P90, P95, P99\",\n            \"labelsIndex\": \"0,1,2,3,4\",\n            \"unit\": \"ms\"\n          }\n        ]\n      }\n    ]\n  }\n]",
                    "activated": true,
                    "disabled": false
                }]
            }
        };
        return res.data.getAllTemplates || [];
    });
  },
  ADD_TEMPLATE(context, params) {
    return graph
      .query('mutationAddTemplate')
      .params({ setting: params })
      .then((res: AxiosResponse) => {
        if (!res.data.data) {
          return;
        }
        return res.data.data.addTemplate || [];
      });
  },
};

export default {
  state: initState,
  actions,
  mutations,
};
